#+TITLE: Startup Workflow
#+AUTHOR: Craig Jennings & Claude
#+DATE: 2026-02-07

* Overview

This workflow runs automatically at the beginning of EVERY session. It gives Claude project context, syncs templates, discovers available workflows, and determines session priorities. Do NOT ask Craig if he wants to run it — just execute it.

* The Workflow

** Step 1: Check for Interrupted Session

- Run =date= for accurate timestamp
- Check if =docs/session-context.org= exists — if so, previous session crashed. Read it immediately to recover context.
- Check last session entry in notes.org for missing end timestamp — mention to Craig if found

Rationale: Prevents losing work from crashed sessions.

** Step 2: Sync Templates

Template is authoritative — copy, don't diff:

#+begin_src bash
cp ~/projects/claude-templates/docs/protocols.org docs/protocols.org
cp -r ~/projects/claude-templates/docs/workflows docs/
cp -r ~/projects/claude-templates/docs/scripts docs/
cp -r ~/projects/claude-templates/docs/announcements docs/
#+end_src

Mention significant updates if noticed (new workflows, protocol changes).

Two workflow directories:
- =docs/workflows/= — template (overwritten on sync, never edit in project)
- =docs/project-workflows/= — project-specific (never touched by sync)

Rationale: Keeps all projects aligned with latest protocols.

** Step 3: Process Announcements

- Check =docs/announcements/= for files (skip =the-purpose-of-this-directory.org=)
- For each announcement: read, discuss with Craig, execute, report results, delete the announcement file

Rationale: Announcements are one-off cross-project instructions from Craig.

** Step 4: Scan Workflow Directories [CRITICAL STEP]

List filenames from BOTH directories:

#+begin_src bash
ls -1 docs/workflows/
ls -1 docs/project-workflows/  # if it exists
#+end_src

PRINT the filenames — these are the workflow lookup table.

- Filenames are descriptive: "send-email.org" handles "send an email"
- The word "workflow" in any user request → check these directories for a match
- When a request matches a filename → read that file and execute its guidance
- If no match → offer to create via create-workflow (goes to =project-workflows/=)

Rationale: Workflow filenames are the discovery mechanism. The directory listing IS the catalog — no separate index needed.

** Step 5: Read notes.org (Key Sections Only)

protocols.org is already read before this workflow runs — skip it.

Read these notes.org sections:
1. Project-Specific Context (the key section)
2. Active Reminders → surface to user immediately
3. Pending Decisions → mention to user
4. Last 2-3 Session History entries only

Do NOT read: About This File, full history, archived sessions.

Rationale: Gives Claude project context without wasting tokens on static content.

** Step 6: Process Inbox

- Check =./inbox/= directory
- If empty: continue
- If non-empty: process is MANDATORY (don't ask, just do it)
- For each file: read, determine action, recommend filing, get approval, move

Rationale: Ensures new documents don't go unnoticed.

** Step 7: Ask About Priorities

Ask: "Is there something urgent, or should we follow the what's-next workflow?"

- If urgent: proceed immediately
- If what's-next: check =docs/workflows/whats-next.org=
- If unsure: surface reminders, pending decisions, recent work as context

Rationale: Gives Craig control over session direction.

* Common Mistakes

1. Reading the entire notes.org file — only read key sections listed in Step 5
2. Skipping template sync — miss important updates across projects
3. Not checking for session-context.org — lose context from crashed sessions
4. Forgetting to surface Active Reminders — Craig misses critical items
5. Asking if Craig wants inbox processed — it's mandatory, not optional
6. Announcing "session start complete" — just begin working on the chosen task
